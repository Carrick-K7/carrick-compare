# Task T-008: 省内同级排名功能

## 目标
实现省内同级行政区域GDP排名功能，让用户了解选中区域在省内的经济位次。

## 完成状态
✅ 已完成

## 实现内容

### 1. 排名算法 (`src/utils/ranking.ts`)
- ✅ 创建 `getProvinceRanking(targetCode: string)` 函数
- ✅ 实现同省份、同级区域筛选逻辑
- ✅ 按GDP降序排序
- ✅ 标注当前区域排名位次
- ✅ 辅助函数：`getLevelName()` 和 `formatGDP()`

### 2. 排名列表组件 (`src/components/ProvinceRankingList.tsx`)
- ✅ 展示列表标题（如"广东省地级行政区GDP排名"）
- ✅ 使用 shadcn Table 组件展示排名列表
- ✅ 排名前三特殊标识（🥇🥈🥉）
- ✅ 当前区域高亮显示（不同背景色 + "当前"标签）
- ✅ 可点击跳转至对应区域详情
- ✅ 响应式设计（移动端可横向滚动）
- ✅ 显示当前排名位置（卡片右上角）

### 3. UI组件 (`src/components/ui/table.tsx`)
- ✅ 创建 shadcn Table 组件
- ✅ 支持 Table, TableHeader, TableBody, TableRow, TableCell, TableHead

### 4. 集成到结果页 (`src/pages/ResultPage.tsx`)
- ✅ 引入 ProvinceRankingList 组件
- ✅ 在右侧栏添加排名组件
- ✅ 区域切换时自动重新计算

## QA 检查

- [x] 防线1: ESLint + TypeScript 无错误
  - `src/utils/ranking.ts` - 无错误
  - `src/components/ProvinceRankingList.tsx` - 无错误
  - `src/components/ui/table.tsx` - 无错误
  
- [x] 防线2: npm run build 成功
  - ✅ 构建成功，生成 dist 目录
  
- [x] 防线3: 功能验证
  - ✅ 排名计算正确（同省同级筛选）
  - ✅ 当前区域高亮显示
  - ✅ 可点击跳转
  - ✅ 样式美观（排名图标、颜色区分）

## 文件变更

```
src/
├── utils/
│   └── ranking.ts          # 新增：排名算法
├── components/
│   ├── ProvinceRankingList.tsx  # 新增：排名列表组件
│   └── ui/
│       └── table.tsx       # 新增：Table UI组件
└── pages/
    └── ResultPage.tsx      # 修改：集成排名组件
```

## 技术细节

### 排名算法逻辑
1. 获取目标区域的省份代码和层级
2. 筛选同省份、同级的所有区域
3. 获取2023年GDP数据（年度数据）
4. 按GDP降序排序
5. 标注当前区域的排名位次
6. 返回完整排名列表

### UI设计
- 使用 Card 组件作为容器
- 表格头部显示：排名、区域、GDP
- 前三名使用奖牌图标（🥇🥈🥉）
- 当前行使用 `bg-primary/10` 高亮
- 表格行可点击，hover 时有背景变化
- 卡片头部右侧显示当前区域排名

## 提交信息

```
T-008: 省内同级排名功能
```
