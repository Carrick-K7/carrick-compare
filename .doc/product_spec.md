# Compare v1.0.0 - Product Spec

> **状态**: ✅ 已完成并部署
> **版本**: v1.0.0
> **更新时间**: 2026-02-22
> **部署地址**: https://compare.carrick7.com

---

## 1. 产品概述

### 产品名称
Carrick Compare - 行政区域 GDP 对比查询系统

### 产品定位
提供中国省、市、区三级行政区域的 GDP 经济数据查询与对比分析工具。

### 目标用户
- 经济研究人员
- 区域发展分析者
- 投资者与决策者
- 对地方经济感兴趣的公众

### 核心价值
- **数据全面**: 覆盖 148 个行政区域，1,260 条 GDP 记录
- **查询便捷**: 支持城市名称和行政区划代码搜索
- **对比直观**: GDP 相近区域推荐、省内排名对比
- **趋势可视**: 历史数据图表展示，支持年度/半年度粒度

---

## 2. 功能范围

### 2.1 核心功能（已完成）

| 功能模块 | 描述 | 状态 |
|:---|:---|:---:|
| **GDP 查询对比** | 支持省/市/区三级区域搜索与详情查看 | ✅ |
| **相似区域推荐** | 基于 GDP 数值智能推荐相近区域（其他省份） | ✅ |
| **省内排名** | 展示同省同级区域的 GDP 排名 | ✅ |
| **历史趋势图表** | 年度/半年度 GDP 变化趋势可视化 | ✅ |
| **热门城市快捷入口** | 首页展示热门城市快速跳转 | ✅ |

### 2.2 数据覆盖

| 指标 | 详情 |
|:---|:---|
| **区域数量** | 148 个行政区域 |
| **数据条目** | 1,260 条 GDP 记录 |
| **时间跨度** | 2015-2024 年（10年）|
| **粒度支持** | 年度数据 + 半年度数据 |
| **行政级别** | 省、市、区三级 |
| **数据单位** | 亿元（人民币）|

### 2.3 数据来源

| 来源类型 | 具体说明 |
|:---|:---|
| **官方数据** | 国家统计局、各市统计局年度公报 |
| **权威媒体** | 新浪财经、第一财经等财经媒体报道 |
| **更新频率** | 年度数据每年更新（次年3-4月发布）|
| **最新数据** | 2024年年度数据（2025年发布）|

> **说明**: 2025年数据尚未发布，预计2026年3-4月由各城市统计局公布。

### 2.3 页面结构

```
/
├── 首页 (HomePage)
│   ├── 搜索框（支持模糊搜索）
│   ├── 热门城市快捷入口
│   └── 产品特性介绍
│
└── 区域详情页 (ResultPage)
    ├── 顶部导航栏（返回、当前区域路径）
    ├── 左侧：区域信息卡片
    │   ├── 区域名称与代码
    │   ├── 当前年份 GDP
    │   └── 年份切换器
    ├── 中间：历史趋势图表
    │   ├── 年度/半年度切换
    │   └── Recharts 折线图
    ├── 右侧：推荐与排名
    │   ├── 相似区域推荐（GDP相近的其他省区域）
    │   └── 省内同级排名
    └── 底部：时间粒度切换栏
```

---

## 3. 交互流程

### 3.1 搜索流程

```
用户输入 → 防抖搜索(300ms) → 实时匹配 → 高亮显示 → 点击跳转详情
```

**搜索特性**:
- 支持城市名称搜索（如"深圳"）
- 支持区划代码搜索（如"440300"）
- 支持拼音匹配
- 支持路径模糊搜索（如"广东省深圳市"）
- 键盘导航支持（↑↓选择，Enter确认，Esc关闭）

### 3.2 详情页流程

```
进入详情页 → 加载区域数据 → 展示三栏布局
                                ├── 左栏：区域基本信息 + 年份选择
                                ├── 中栏：GDP趋势图表
                                └── 右栏：相似推荐 + 省内排名
```

### 3.3 相似区域推荐逻辑

1. 获取当前区域指定年份的 GDP 数值
2. 筛选同级别的其他省份区域
3. 计算 GDP 差值与百分比差异
4. 按差异绝对值排序，取前 N 个
5. 展示差值标签（绿色=接近，黄色=中等，红色=差距大）

---

## 4. 验收标准

- [x] 搜索响应时间 < 300ms
- [x] 支持 148 个区域数据查询
- [x] 历史趋势图表正常渲染
- [x] 相似区域推荐算法准确
- [x] 省内排名数据正确
- [x] 响应式布局（桌面/平板/手机）
- [x] 部署至 compare.carrick7.com
- [x] 12 个 Task 全部完成（T-001 ~ T-012）

---

## 5. 技术栈

| 层级 | 技术 | 版本 |
|:---|:---|:---|
| **框架** | React | ^19.2.0 |
| **语言** | TypeScript | ~5.9.3 |
| **路由** | React Router DOM | ^7.13.0 |
| **构建** | Vite | ^7.3.1 |
| **样式** | Tailwind CSS | ^4.2.0 |
| **组件库** | Radix UI + 自定义 | - |
| **图表** | Recharts | ^3.7.0 |
| **图标** | Lucide React | ^0.575.0 |
| **测试** | Playwright | ^1.58.2 |

---

## 6. 版本历史

| 版本 | 日期 | 变更内容 |
|:---|:---|:---|
| v1.0.0 | 2026-02-22 | 初始版本发布，完成 12 个 Task |

---

## 7. Task 清单

| Task ID | 描述 | 状态 |
|:---|:---|:---:|
| T-001 | 项目初始化 | ✅ |
| T-002 | 数据结构设计 | ✅ |
| T-003 | 数据收集（148区域，1260记录） | ✅ |
| T-004 | 搜索组件开发 | ✅ |
| T-005 | 区域信息卡片 | ✅ |
| T-006 | 结果页面布局 | ✅ |
| T-007 | 相似度算法实现 | ✅ |
| T-008 | 省内排名功能 | ✅ |
| T-009 | 历史趋势图表 | ✅ |
| T-010 | 功能测试 | ✅ |
| T-011 | 部署上线 | ✅ |
| T-012 | CSS修复与图标更新 | ✅ |

---

*Product Spec v1.0 | Carrick Compare*
